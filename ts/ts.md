# 目前的状况
- ts_lecture 大杂烩，包括用户、统计、office、订单。
- ts_platform 看上去是提供基础服务的，但都是运营相关的业务，有些东西比如专辑，应该放在lecture微服务，但是放在了platform
- webapp、webapi：控制器有太多业务代码，不利于接下来网关的替换

# 微服务结构调整
- `ts_platform<抽离>`
  - platform更像是提供与`业务关联性不强`的服务，不应该依赖`lecture`这种带业务服务，目前存在一些问题。比如
    - 活动放在了platform，要判断用户是否能参加活动，需要依赖lecture微服务的。那就意味着，活动一部分逻辑只能写在lecture。抽离后，活动就放在了`ts_operation`微服务，它与`ts_lecture`平级，可以相互调用。
  - 抽离思路
    - 活动、banner、卡券、积分放在`ts_operation`
    - 机构定制（天力泰）、帮助中心、反馈、消息中心 `保留`
    - 专辑 移到 `ts_lecture`
- `ts_lecture<抽离>`
  - 目前名不副实，说是备课相关，其实就是一个大杂烩
  - 抽离思路
    - 统计单独拆成一个微服务，它与业务无关，而且它还会引入统计需要的东西，比如clickhouse、flink、kfk等，业务功能并不需要
    - office相关应该放在 base的微服务ott-service 【第三方服务】
    - 备课会员相关，应该放在 ts_operation 里面
    - 用户权限、信息相关移到ts_platform
    - generateId,生成自增id，移到ts_platform
    - 申请试用 移到 ts_operation
    - 订单相关移动到 ts_platform
    - 针对备课业务的user相关的包装 统一移到 ts_platform
- `ts_operation<新增>`
  - 运营相关, 放活动、banner等
- `ts_statistics<新增>`
  - 统计
- `ott-service<新增>`
  - 第三方服务
  - 微信、office、wps、语雀等
- ~~ts_common~~
  - 目前有哪些
    - cache、cas、enum、exception、id生成器、log、代理、zip打包、ResponseVo、swagger、上传、util、分页，主要有这些，有些在用，有些废弃了已经移到了ic_common下，但还有还没废弃
    - flysystem
      - 这是啥，需要移到ic_common下面吗？
  -  不再保留这个微服务，还有一些引用的地方移到ic_commmon下，彻底由ic_common取代
- ~~ts_webapp~~
  - 所有逻辑移动到微服务
  - 网关取代
- ~~ts_manager~~
  - 同webapp

# 其他建议
- 在重构ts项目时
  - 可以考虑使用 `lombok`提高效率 
  - 统一代码规范，命名规范，补充注释
  - 统一技术栈，比如持久层，统一为mybatis
  - 引入hutool工具包，替换掉重复造轮子的代码
- ic_common 很膨胀
  - ic_common 放`非运行`的公共代码，比如配置、工具
  - 网关代替掉webapp、webapi后，common下的web已经没有存在的必要了。
- 数据库可以只分为三类,其实与微服务对应
    - ts_lecture
    - ts_operation
    - ts_platform
    - 删除的数据库
      - ts_manager (大部分移到ts_platform)
      - ts_metadata (微服务已经删除了)
      - ts_question (微服务已经删除了)
    - 待确认
      - wps_demo