# 表引擎
## 概述
表的引擎即表的类型，决定了：
1. 数据存储方式与位置
2. 支持哪些查询
3. 并发数据访问
4. 索引的使用
5. 多线程支持
6. 数据复制（高可用）

## TinyLog
最简单的表引擎
1. 存在磁盘
2. 不支持索引
3. 没有并发控制（支持并发，但没有并发优化）
4. 适合场景
   1. 只读取，比如国家省份表，是不变的
## Memory
1. 快，查询速度10G/s
2. 数据以未压缩的原始形式直接保存在内存中，服务重启就消失
3. 读写操作不阻塞
4. 不支持索引
5. 使用场景不多

## Merge
1. 本身不存储数据，从其他表读取数据
2. 读是自动并行，不支持写入
3. 只能合并本地表，不能跨机器

## `MergeTree`
1. 合并树以及该系列*MergeTree ——> yyds
2. 基本理念
   1. 按照一定的规则合并数据
3. 特点
   1. 按主键排序
   2. 可以分区（如果指定了主键）
   3. 支持数据副本
   4. 支持数据采样
4. 格式
```sql
ENGINE = MergeTree()
[PARTITION BY expr] # 按月分区:toYYYYMM(date_column)
[ORDER BY expr] # ORDER BY(id, name)
[PRIMARY KEY expr] # 不写默认同排序键
[SIMPLE BY expr] # 抽象表达式,主键中必须包含这个表达式
[SETTINGS name=value,...] # 额外参数，比如 索引粒度等
```