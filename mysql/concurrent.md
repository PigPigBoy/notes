# 并发参数调整

## （1）max_connections
- 最大连接数
- 默认`151`
- 查看状态变量`connection_errors_max_connections`。如果不为0并且一直增长，说明又不断连接请求被拒绝，可以考虑增大该值
- 因素：操作系统、cpu、内存等。一般说来，性能较好的服务器，500-1000的连接不是难事

<br />

## （2）back_log
- 监听TCP端口`积压请求栈`大小。如果mysql的连接数达到上限，新请求会暂存在这里，等待有空闲的连接。
- 如果等待连接数量 > back_log，新来的连接请求就会报错
- 5.6.6以前默认50，之后默认 `50 + (max_connections / 5)`【80】，但不超过900
- 如果数据库短时间内处理大量连接请求，可以考虑增加back_log值

<br />

## （3）table_open_cache
- 表缓存数量
- 每一条sql执行线程至少要打开1一个表缓存
- 由`最大连接数`与`每个连接需要操作表的数量`决定
- 默认`2000`

<br />

## （4）thread_cache_size
- 线程缓存大小
- 为了加速客户端与mysql服务端连接效率
- mysql的线程池，客户端请求从中拿出线程执行请求
- 本质就是设置线程池的大小
- 默认`9`

<br />

## （5）innodb_lock_wait_timeout
- 事务等待行锁时间
- 默认`50`ms
- 对于快速响应的业务系统来说，可以`调小`，避免事务长时间挂起
- 对于后台系统来说，可以`增加`，避免发生大的回滚操作